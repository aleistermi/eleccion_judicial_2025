<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte de Análisis de Datos</title>
    
    <!-- Plotly.js para gráficos interactivos -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    
    <!-- Marked.js para procesar markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            border-radius: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            padding: 40px 0;
            border-bottom: 3px solid #007bff;
            margin-bottom: 40px;
        }
        
        .header h1 {
            color: #007bff;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header .subtitle {
            color: #666;
            font-size: 1.2em;
        }
        
        .section {
            margin-bottom: 50px;
        }
        
        .section h2 {
            color: #007bff;
            border-left: 4px solid #007bff;
            padding-left: 15px;
            margin-bottom: 20px;
            font-size: 1.8em;
        }
        
        .section h3 {
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.4em;
        }
        
        .markdown-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #28a745;
        }
        
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 30px 0;
        }
        
        .chart-title {
            text-align: center;
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .insights {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 30px 0;
        }
        
        .insights h3 {
            color: white;
            margin-bottom: 15px;
        }
        
        .insights ul {
            padding-left: 20px;
        }
        
        .insights li {
            margin-bottom: 8px;
        }
        
        .footer {
            text-align: center;
            padding: 30px 0;
            border-top: 2px solid #dee2e6;
            margin-top: 50px;
            color: #666;
        }
        
        .date-info {
            background: #e9ecef;
            padding: 10px 20px;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 30px;
            color: #495057;
        }
        
        code {
            background: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        
        blockquote {
            border-left: 4px solid #ffc107;
            background: #fff3cd;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>📊 Análisis de Datos Interactivo</h1>
            <div class="subtitle">Reporte Completo con Visualizaciones</div>
        </div>
        
        <!-- Información de fecha -->
        <div class="date-info">
            <strong>Fecha del reporte:</strong> <span id="report-date"></span>
        </div>
        
        <!-- Sección 1: Introducción -->
        <div class="section">
            <h2>🎯 Introducción</h2>
            <div class="markdown-content" id="intro-content">
                <!-- El contenido markdown se cargará aquí -->
            </div>
        </div>
        
        <!-- Sección 2: Primer Gráfico -->
        <div class="section">
            <h2>📈 Análisis de Tendencias</h2>
            <div class="markdown-content" id="trends-content">
                <!-- Contenido markdown para tendencias -->
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Evolución de Ventas Mensuales</div>
                <div id="chart1" style="height: 500px;"></div>
            </div>
            
            <div class="insights">
                <h3>💡 Insights Clave</h3>
                <ul>
                    <li>Se observa un crecimiento constante durante el primer trimestre</li>
                    <li>Hay una caída notable en abril, posiblemente por factores estacionales</li>
                    <li>La recuperación en mayo-junio muestra resiliencia del negocio</li>
                </ul>
            </div>
        </div>
        
        <!-- Sección 3: Segundo Gráfico -->
        <div class="section">
            <h2>🎯 Distribución por Categorías</h2>
            <div class="markdown-content" id="categories-content">
                <!-- Contenido markdown para categorías -->
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Participación de Mercado por Producto</div>
                <div id="chart2" style="height: 500px;"></div>
            </div>
        </div>
        
        <!-- Sección 4: Tercer Gráfico -->
        <div class="section">
            <h2>🌍 Análisis Geográfico</h2>
            <div class="markdown-content" id="geographic-content">
                <!-- Contenido markdown para análisis geográfico -->
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Ventas por Región</div>
                <div id="chart3" style="height: 500px;"></div>
            </div>
        </div>
        
        <!-- Sección 5: Conclusiones -->
        <div class="section">
            <h2>🎯 Conclusiones y Recomendaciones</h2>
            <div class="markdown-content" id="conclusions-content">
                <!-- Contenido markdown para conclusiones -->
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p>Reporte generado automáticamente | © 2024 Análisis de Datos</p>
        </div>
    </div>

    <script>
        // Configurar la fecha del reporte
        document.getElementById('report-date').textContent = new Date().toLocaleDateString('es-ES', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Contenido Markdown para cada sección
        const markdownContent = {
            intro: `
## Resumen Ejecutivo

Este reporte presenta un **análisis completo** de los datos de ventas del último trimestre. 

### Objetivos del análisis:
- Identificar tendencias de crecimiento
- Analizar la distribución por categorías
- Evaluar el rendimiento geográfico
- Proporcionar recomendaciones estratégicas

> **Nota importante:** Los datos han sido procesados y validados siguiendo las mejores prácticas de análisis de datos.
            `,
            
            trends: `
## Metodología de Análisis

Para el análisis de tendencias utilizamos:

1. **Datos históricos** de los últimos 12 meses
2. **Técnicas de suavizado** para identificar patrones
3. **Análisis estacional** para detectar ciclos

### Métricas clave:
- \`Crecimiento mensual\`: +12.5% promedio
- \`Variabilidad\`: ±8.3% desviación estándar
- \`Tendencia general\`: **Positiva** 📈
            `,
            
            categories: `
## Análisis de Productos

La distribución por categorías revela información valiosa sobre:

### Categorías principales:
- **Electrónicos**: Líder del mercado con 35% de participación
- **Ropa**: Segundo lugar con crecimiento sostenido (28%)
- **Hogar**: Categoría emergente con potencial de expansión (22%)
- **Otros**: Productos especializados (15%)

*Los datos muestran una diversificación saludable del portafolio.*
            `,
            
            geographic: `
## Distribución Geográfica

El análisis regional muestra patrones interesantes:

### Regiones de alto rendimiento:
1. **Norte**: Mayor volumen de ventas
2. **Centro**: Mejor margen de ganancia
3. **Sur**: Mayor crecimiento porcentual

### Oportunidades identificadas:
- Expansión en mercados emergentes
- Optimización de la cadena de suministro
- Estrategias regionales diferenciadas
            `,
            
            conclusions: `
## Recomendaciones Estratégicas

Basado en el análisis realizado, se recomienda:

### Acciones inmediatas:
1. **Fortalecer** la categoría de electrónicos
2. **Expandir** presencia en la región sur
3. **Optimizar** inventario en productos de baja rotación

### Acciones a mediano plazo:
- Desarrollar nuevos canales de distribución
- Implementar estrategias de marketing digital
- Mejorar la experiencia del cliente

### Métricas de seguimiento:
- Crecimiento mensual > 10%
- Satisfacción del cliente > 85%
- Margen de ganancia > 25%

---

**¿Preguntas?** Este reporte está diseñado para ser interactivo. Puedes explorar los gráficos haciendo clic y zoom.
            `
        };
        
        // Función para renderizar markdown
        function renderMarkdown(elementId, content) {
            document.getElementById(elementId).innerHTML = marked.parse(content);
        }
        
        // Renderizar todo el contenido markdown
        renderMarkdown('intro-content', markdownContent.intro);
        renderMarkdown('trends-content', markdownContent.trends);
        renderMarkdown('categories-content', markdownContent.categories);
        renderMarkdown('geographic-content', markdownContent.geographic);
        renderMarkdown('conclusions-content', markdownContent.conclusions);
        
        // Gráfico 1: Línea de tendencias
        const chart1Data = [{
            x: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
            y: [100, 120, 140, 110, 160, 180, 200, 190, 220, 240, 260, 280],
            type: 'scatter',
            mode: 'lines+markers',
            name: 'Ventas',
            line: {
                color: '#007bff',
                width: 3
            },
            marker: {
                size: 8,
                color: '#007bff'
            }
        }];
        
        const chart1Layout = {
            title: '',
            xaxis: { title: 'Mes' },
            yaxis: { title: 'Ventas (Miles $)' },
            showlegend: false,
            plot_bgcolor: '#f8f9fa',
            paper_bgcolor: 'white'
        };
        
        Plotly.newPlot('chart1', chart1Data, chart1Layout, {responsive: true});
        
        // Gráfico 2: Gráfico de pastel
        const chart2Data = [{
            values: [35, 28, 22, 15],
            labels: ['Electrónicos', 'Ropa', 'Hogar', 'Otros'],
            type: 'pie',
            marker: {
                colors: ['#007bff', '#28a745', '#ffc107', '#dc3545']
            },
            textinfo: 'label+percent',
            textposition: 'outside'
        }];
        
        const chart2Layout = {
            title: '',
            showlegend: true,
            legend: {
                orientation: 'h',
                y: -0.1
            }
        };
        
        Plotly.newPlot('chart2', chart2Data, chart2Layout, {responsive: true});
        
        // Gráfico 3: Barras horizontales
        const chart3Data = [{
            y: ['Norte', 'Centro', 'Sur', 'Este', 'Oeste'],
            x: [450, 380, 320, 290, 250],
            type: 'bar',
            orientation: 'h',
            marker: {
                color: ['#007bff', '#28a745', '#ffc107', '#17a2b8', '#6f42c1']
            }
        }];
        
        const chart3Layout = {
            title: '',
            xaxis: { title: 'Ventas (Miles $)' },
            yaxis: { title: 'Región' },
            showlegend: false,
            plot_bgcolor: '#f8f9fa',
            paper_bgcolor: 'white'
        };
        
        Plotly.newPlot('chart3', chart3Data, chart3Layout, {responsive: true});
        
        // Hacer los gráficos responsivos
        window.addEventListener('resize', function() {
            Plotly.Plots.resize('chart1');
            Plotly.Plots.resize('chart2');
            Plotly.Plots.resize('chart3');
        });
    </script>
</body>
</html>
